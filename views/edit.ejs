<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../resources/css/style.css">

  <!-- ===== BOX ICONS ===== -->
  <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>

  <!-- ===== CSS ===== -->
  <link rel="stylesheet" href="../../resources/assets/css/styles.css">
  <title>Editar Usuario</title>
</head>

<body id="body-pd">
    <% if (user) { %>
  <% if (login) { %>
    <% if (rol == 'admin') { %>


      <header class="header" id="header">
        <div class="header__toggle">
            <i class='bx bx-menu' id="header-toggle"></i>
        </div>

        <div class="header__img">
            <img src="../resources/assets/img/perfil.jpg" alt="">
        </div>
    </header>

    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div>
              <a href="#" class="nav__logo">
                <i class='bx bxs-user' style='color:#e7e1e1'  ></i>
                <span class="nav__logo-name"><%= name %></span>
            </a>

            <div class="nav__list">
                <a href="../inicio" class="nav__link active">
                <i class='bx bx-grid-alt nav__icon' ></i>
                    <span class="nav__name">Inicio</span>
                </a>

                <a href="../graficos" class="nav__link">
                  <i class='bx bx-bar-chart-alt-2 nav__icon' ></i>
                  <span class="nav__name">Graficos</span>
              </a>

              <a href="../estadisticas" class="nav__link">
                <i class='bx bx-bar-chart-alt-2 nav__icon' ></i>
                <span class="nav__name">Estadisticas</span>
              </a>

              <a href="../usuarios" class="nav__link">
                  <i class='bx bx-user nav__icon' ></i>
                  <span class="nav__name">Administrar Usuarios</span>
              </a>

                <a href="../logout" class="nav__link">
                  <i class='bx bx-log-out nav__icon' ></i>
                  <span class="nav__name">Cerrar Sesion</span>
              </a>
                  
              </div>
            </div>

            
        </nav>
    </div>

    <div class="register-form d-inline-flex p-2" style="max-width: 100%;">
      <h1>Editar usuarios</h1>
      <form action="/update" method="POST">
        <input type="text" name="id" value="<%= user.id %>" required tabindex="2" hidden autofocus>
        <label for="user">Usuario</label>
        <input type="text" name="username" value="<%= user.user %>" required tabindex="2" autofocus>
        <label for="name">Nombre y Apellido</label>
        <input type="text" name="name" value="<%= user.name %>" required tabindex="3">
        <label for="email">Correo</label>
        <input type="email" class="email-input" name="email" value="<%= user.email %>" required tabindex="4">
        <label for="rol">Rol</label>
        <select id="rol" name="rol" class="select-css"  tabindex="5">
          <option <%= user.rol=='admin' ? "selected" : '' %> value="admin" selected>Admin</option>
          <option <%= user.rol=='data entry' ? "selected" : '' %> value="data entry">Usuario</option>
        </select>
        <br>
        <label for="pass">Password</label>
        <input type="password" name="password" placeholder="Ingrese su nueva contraseña" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="La contraseña debe tener mayusculas, minusculas y numeros" required tabindex="6">
        <div style="display: inline;">
          
          <button class="btn btn-primary botonsave" id="botonsave" type="submit">Registrar</button>
        </div>
      </form>
    </div>

    <!--===== MAIN JS =====-->
    <script src="../resources/assets/js/main.js"></script>

  <%} else { %>
    <h1><strong>Usted no es admin</strong></h1>   
    <a href="../inicio" class="a-login">Ir a inicio</a>
<% } %> 
  


  <%} else { %>

    
    <!-- ===== CSS ===== -->
    <link rel="stylesheet" href="../resources/css/style.css">
    <h1><strong><%= name %></strong></h1>   
    <a href="../login" class="a-login">Ir a Login</a>
    
    
<% } %>

              <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

              <% if (typeof alert != "undefined")  { %>
                <script>
                Swal.fire({
                  title:'<%= alertTitle %>',
                  text:'<%= alertMessage %>',
                  icon:'<%= alertIcon %>',
                  showConfirmButton: <%= showConfirmButton %>,
                  timer: <%= timer %>
                }).then(()=>{
                  window.location='/<%= ruta %>'
                })
                </script>
              <% } %>
                  </div>

                  <!-- Bootstrap CSS -->
                  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
                  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
                  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    
    <script src="resources/js/icons.js"></script>
    <script src="resources/js/script.js"></script>
    <% } %>
</body>

</html>